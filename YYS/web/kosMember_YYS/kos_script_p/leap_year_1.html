<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script  src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript">
 $(document).ready(function(){
	 console.log("jQuery ready 함수 진입 >>> : ");
	 
	 // 윤달
	 function leapYear(year){
		 console.log("leapYear 함수 진입 >>> : ");
		 console.log("year >>> : "+year);
		 if((year%4 ==0)&&(year%100!=0)||(year%400==0)){
			 console.log(year+"년은  윤년이 맞습니다.");
			 return 1;
		 }else{
			 console.log(year+"년은  윤년이 아닙니다.");
			 return 0;
		 }
	 }
	 
	 
	 // 년, 달을 입력해서 한달 일 수 구하기
	 /*
	 function dayofMonth(year, month){
		 console.log("dayofMonth 함수 진입 >>> : ");
		 var day;
		 if (1==month || 3==month || 5==month || 7==month || 8==month || 10==month || 12==month){
			 console.log("day는 31입니다.");
			 day=31;
		 }
		 if(2==month||4==month||6==month||9==month||11==month){
			 console.log("day는 30입니다.");
			 day=30;
		 }
		 if(2==month){
			 console.log("윤년 체크를 위한 로직 >>> : ");
			 var y=leapYear(year);
			 console.log("윤년이면 1, 윤년이 아니면  0 >>> : "+y);
			 day=28+y;
		 }
		 return day;
	 }
	 */
	 
	 function dayofMonth(year, month){
		 console.log("dayofMonth 함수 진입 >>> : ");
		 console.log("year >>> : "+year);
		 console.log("typeof(year) >>> : "+typeof(year));
		 // typeof(year) >>> : string
		 console.log("typeof(month) >>> : "+typeof(month));
		 // typeof(month) >>> : string
		 var day;
		 var arr1=['1','3','5','7','8','10','12'];
		 var arr2=['2','4','6','9','11'];
		 
		 if(arr1.indexOf(month)==-1){
			 console.log("arr2에 있습니다.");
			 day=30;
		 }
		 if(arr2.indexOf(month)==-1){
			 console.log("arr1에 있습니다.");
			 day=31;
		 }
		 if(2==month){
			 console.log("윤년 체크를 위한 로직 >>> : ");
			 var y=leapYear(year);
			 console.log("윤년이면 1, 윤년이 아니면  0 >>> : "+y);
			 day=28+y;
		 }
		 return day;
	 }
	 
	 
	 $("#mbirth").on("input", function(){
		 var m=$("#mbirth");
		 console.log("m >>> : "+m);
		 var mlen=$("#mbirth").val().length;
		 // var mlen=$("#mbirth").length;
		 console.log("mlen >>>> : "+mlen);
		 if(m.val().length > mlen){
			 m.value=m.value.slice(0, mlen);
		 }
	 });
	 
	 $("#mbirth").change(function(){
		console.log("mbirth change function 진입 >>> : ");
		$("#mbirth1").empty();
		
		for(c=1; c<=12; c++){
			var option=$("<option value="+"'"+c+"'"+">"+c+"</option>");
			$("#mbirth1").append(option);
		}
	 });
	 
	 $("#mbirth1").change(function(){
		 console.log("mbirth1 change function 진입 >>> : ");
		 var y=$("#mbirth").val();
		console.log("var y >>> : "+y);
		var m=$("#mbirth1").val();
		console.log("var m >>> : "+m);
		console.log("typeof(m) >>> : "+typeof(m));
		// string
		
		var d=dayofMonth(y, m);
		console.log("d >>> : "+d);
		
		$("#mbirth2").empty();

		for(c=1; c<=d; c++){
			var option=$("<option value="+"'"+c+"'"+">"+c+"</option>");
			$("#mbirth2").append(option);
		}
	 });
	 
 });

</script>
</head>
<body>
<form name="memForm" id="memForm">
<input type="text" class="mbirth" name="mbirth" id="mbirth" placeholder="년(4자)" maxlength="4" style="width:100px" />
<select class="mbirth1" name="mbirth1" id="mbirth1" style="width:100px;"></select>
<select class="mbirth2" name="mbirth2" id="mbirth2" style="width:100px;"></select><br>
<input type="button" id="btn" value="보내기" />
</form>
</body>
</html>